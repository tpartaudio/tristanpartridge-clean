<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>- Tristan Partridge</title>
  <style>
    /* ============================================
       SECTION 1: VARIABLES PERSONNALISABLES
       ============================================ */
    :root {
      /* Video – YouTube Short or local MP4/MOV */
      --video-src: https://www.youtube.com/shorts/w4q8_5ziw9w;

      /* Contenu */
      --title: Nays MZ RNNR;
      --credit: by Nays;
      
      /* LAPTOP - Ajuste la position */
      --laptop-text-x: -150px;
      --laptop-text-y: -30px;
      --laptop-video-x: -80px;
      --laptop-video-y: -30px;
      --laptop-gap: 6rem;
      
      /* IPAD - Ajuste la position */
      --ipad-text-x: 0px;
      --ipad-text-y: -90px;
      --ipad-video-x: 0px;
      --ipad-video-y: -90px;
      --ipad-gap: 5.5rem;
      
      /* MOBILE - Ajuste la position */
      --mobile-text-x: 0px;
      --mobile-text-y: -20px;
      --mobile-video-x: 0px;
      --mobile-video-y: -20px;
      --mobile-gap: 2rem;
      
      /* Tailles vidéo */
      --laptop-video-width: 360px;
      --ipad-video-width: 320px;
      --mobile-video-width: 280px;
    }

    /* ============================================
       SECTION 2: STYLES DE BASE
       ============================================ */
    * { margin:0; padding:0; box-sizing:border-box; }

    body { 
      background: rgba(255,255,255,0.96);
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      overflow: hidden;
      backdrop-filter: blur(4px);
      width: 100vw;
      height: 100vh;
    }
    .dark body { background: rgba(0,0,0,0.96); }

    .page-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      padding: 3rem 5vw;
      gap: var(--laptop-gap);
    }

    .video-title {
      color: #000;
      line-height: 1.2;
      opacity: 0.95;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      max-width: 360px;
      flex-shrink: 0;
      transform: translate(var(--laptop-text-x), var(--laptop-text-y));
    }
    .video-title .title {
      font-weight: 700;
      font-size: 2.2rem;
      letter-spacing: -0.03em;
      margin-bottom: 0.3rem;
    }
    .video-title .title::before { content: '"'; }
    .video-title .title::after  { content: '"'; }
    .video-title .dash   { display:block; font-size:1.3rem; opacity:0.5; font-weight:300; margin:0.3rem 0; }
    .video-title .credit { display:block; font-size:1.2rem; font-weight:400; opacity:0.9; margin-top:0.3rem; }
    .video-title .credit strong { font-weight:700; }
    .dark .video-title,
    .dark .video-title .dash,
    .dark .video-title .credit { color:#fff; }

    .video-container {
      position: relative;
      width: var(--laptop-video-width);
      aspect-ratio: 9 / 16;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 40px 100px rgba(0,0,0,0.35);
      cursor: pointer;
      flex-shrink: 0;
      transform: translate(var(--laptop-video-x), var(--laptop-video-y));
    }
    video, iframe { width:100%; height:100%; object-fit:cover; background:#000; border:none; }

    .close-btn {
      position:fixed; top:2rem; right:2rem;
      background:none; border:none; font-size:2.5rem; cursor:pointer;
      color:#000; z-index:20; transition:transform .2s ease; line-height:1;
    }
    .dark .close-btn { color:#fff; }
    .close-btn:hover { transform:scale(1.2); }

    /* RESPONSIVE - TABLETTE */
    @media (max-width:1024px) and (min-width:601px) {
      body { overflow-y:auto; }
      .page-wrapper { gap:var(--ipad-gap); padding:3rem 5vw; min-height:100vh; }
      .video-container { width:var(--ipad-video-width); max-width:40vw;
                         transform:translate(var(--ipad-video-x),var(--ipad-video-y)); }
      .video-title { max-width:min(340px,45vw);
                     transform:translate(var(--ipad-text-x),var(--ipad-text-y)); }
      .video-title .title { font-size:clamp(1.5rem,3vw,2rem); }
      .video-title .dash  { font-size:clamp(1rem,2.5vw,1.25rem); }
      .video-title .credit{ font-size:clamp(.95rem,2.2vw,1.1rem); }
      .close-btn { top:1.5rem; right:1.5rem; font-size:2.2rem; }
    }

    /* RESPONSIVE - MOBILE */
    @media (max-width:600px) {
      .page-wrapper { flex-direction:column; gap:var(--mobile-gap);
                      padding:3rem 5vw; justify-content:flex-start; min-height:100vh; }
      .video-container { width:var(--mobile-video-width); max-width:80vw; order:2;
                         transform:translate(var(--mobile-video-x),var(--mobile-video-y)); }
      .video-title { order:1; max-width:85vw;
                     transform:translate(var(--mobile-text-x),var(--mobile-text-y)); }
      .video-title .title { font-size:1.4rem; }
      .video-title .dash  { font-size:1rem; }
      .video-title .credit{ font-size:.9rem; }
      .close-btn { top:1rem; right:1rem; font-size:2rem; }
      body { overflow-y:auto; }
    }

    @media (min-width:1400px) {
      .page-wrapper { gap:8rem; }
      .video-container { width:400px; }
    }
  </style>
</head>
<body class="light">

  <div class="page-wrapper">
    <div class="video-title">
      <div class="title" id="title-el"></div>
      <div class="dash">-</div>
      <div class="credit" id="credit-el"></div>
    </div>

    <div class="video-container" id="video-container">
      <video id="video-el" preload="metadata" playsinline style="display:none;"></video>
      <div id="youtube-container" style="display:none;width:100%;height:100%;"></div>
    </div>
  </div>

  <button class="close-btn" onclick="window.location.href='index.html';">×</button>

  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
    /* -------------------------------------------------
       1. TITRE & CRÉDIT
       ------------------------------------------------- */
    const titleEl = document.getElementById('title-el');
    const creditEl = document.getElementById('credit-el');
    const titleText = getComputedStyle(document.documentElement).getPropertyValue('--title').trim();
    const creditText = getComputedStyle(document.documentElement).getPropertyValue('--credit').trim();

    titleEl.textContent = titleText;
    if (creditText.toLowerCase().includes('by')) {
      const [a,b] = creditText.split(/by/i);
      creditEl.innerHTML = (a?a.trim()+' by ':'by ')+'<strong>'+b.trim()+'</strong>';
    } else creditEl.textContent = creditText;
    document.title = titleText + ' - Tristan Partridge';

    /* -------------------------------------------------
       2. DÉTECTION VIDÉO (YouTube / local)
       ------------------------------------------------- */
    const src = getComputedStyle(document.documentElement).getPropertyValue('--video-src').trim();
    const nativeVideo = document.getElementById('video-el');
    const ytContainer = document.getElementById('youtube-container');
    let player, isYouTube = false;

    if (src.includes('youtube.com') || src.includes('youtu.be')) {
      isYouTube = true;
      const id = src.split('shorts/')[1]?.split('?')[0] ||
                 src.split('v=')[1]?.split('&')[0];
      ytContainer.style.display = 'block';
      nativeVideo.style.display = 'none';

      window.onYouTubeIframeAPIReady = function(){
        player = new YT.Player('youtube-container',{
          height:'100%', width:'100%', videoId:id,
          playerVars:{
            autoplay:0, controls:1, modestbranding:1, rel:0,
            fs:1, disablekb:0, iv_load_policy:3, cc_load_policy:0
          },
          events:{ onReady:onPlayerReady, onStateChange:onPlayerStateChange }
        });
      };
    } else {
      nativeVideo.src = src;
      nativeVideo.style.display = 'block';
    }

    /* -------------------------------------------------
       3. THÈME
       ------------------------------------------------- */
    if (localStorage.getItem('theme')==='dark') document.body.classList.add('dark');

    /* -------------------------------------------------
       4. ÉLÉMENTS & ÉTAT
       ------------------------------------------------- */
    const container = document.getElementById('video-container');
    let isMobile = window.matchMedia("(max-width:1024px)").matches;

    function getVideoEl(){ return isYouTube ? player?.getIframe() : nativeVideo; }
    function isPlaying(){ return isYouTube ? player?.getPlayerState()===1 : !nativeVideo.paused; }
    function play(){ isYouTube ? player.playVideo() : nativeVideo.play(); }
    function pause(){ isYouTube ? player.pauseVideo() : nativeVideo.pause(); }
    function togglePlay(){
      if (isPlaying()) {
        pause();
      } else {
        play();
      }
    }

    /* -------------------------------------------------
       5. CALLBACKS YOUTUBE
       ------------------------------------------------- */
    function onPlayerReady(){  }
    function onPlayerStateChange(){  }

    /* -------------------------------------------------
       7. CLAVIER (F = fullscreen sur desktop)
       ------------------------------------------------- */
    document.addEventListener('keydown',e=>{
      const typing = document.activeElement &&
        ['INPUT','TEXTAREA'].includes(document.activeElement.tagName) ||
        document.activeElement.isContentEditable;
      if (typing) return;

      if ((e.code==='Space' || e.key===' ') && (!isMobile || isFullscreen())) {
        e.preventDefault(); togglePlay();
      }
      if ((e.key==='f' || e.key==='F') && !isMobile) {
        e.preventDefault(); toggleFullscreen();
      }
    });

    /* -------------------------------------------------
       8. FULLSCREEN (même logique que la page précédente)
       ------------------------------------------------- */
    function isFullscreen(){
      const el = getVideoEl();
      return !!(document.fullscreenElement||document.webkitFullscreenElement||
                document.mozFullScreenElement||document.msFullscreenElement||
                (el?.webkitDisplayingFullscreen));
    }
    function toggleFullscreen(){
      const el = getVideoEl();
      if (isFullscreen()){
        if (document.exitFullscreen) document.exitFullscreen();
        else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        else if (document.mozCancelFullScreen) document.mozCancelFullScreen();
        else if (document.msExitFullscreen) document.msExitFullscreen();
        else if (el.webkitExitFullscreen) el.webkitExitFullscreen();
      } else {
        if (el.requestFullscreen) el.requestFullscreen();
        else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen();
        else if (el.mozRequestFullScreen) el.mozRequestFullScreen();
        else if (el.msRequestFullscreen) el.msRequestFullscreen();
        else if (el.webkitEnterFullscreen) el.webkitEnterFullscreen();
      }
    }
  </script>
</body>
</html>