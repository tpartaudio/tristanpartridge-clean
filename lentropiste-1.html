<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <!-- ============================================= -->
  <!-- 1. META INFORMATION (SEO & BROWSER)          -->
  <!-- ============================================= -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>L'Entropiste - Tristan Partridge</title>

  <!-- ============================================= -->
  <!-- 2. CSS VARIABLES (EASY TO CHANGE)            -->
  <!-- ============================================= -->
  <style>
    :root {
      /* Title and credits */
      --title: "Dorian's Spleen";
      --credit-by: "by";
      --credit-name: "L’Entropiste";

      /* Video size on desktop */
      --video-width: 380px;
      --video-height: 677px; /* 9:16 ratio */

      /* Mobile video size (smaller) */
      --mobile-video-max-width: 320px;
    }

    /* ============================================= */
    /* 3. GENERAL PAGE STYLES                       */
    /* ============================================= */
    body {
      margin: 0;
      background: rgba(255, 255, 255, 0.96);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      overflow: hidden;
      backdrop-filter: blur(4px);
    }

    .dark body {
      background: rgba(0, 0, 0, 0.96);
    }

    /* ============================================= */
    /* 4. MAIN LAYOUT (DESKTOP: SIDE BY SIDE)       */
    /* ============================================= */
    .page-wrapper {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6rem;
      max-width: 98vw;
      padding: 0 6vw;
      height: 100vh;
    }

    /* ============================================= */
    /* 5. TITLE & CREDITS (CENTERED TEXT)           */
    /* ============================================= */
    .video-title {
      color: #000;
      line-height: 1.2;
      opacity: 0.95;
      margin: 0;
      max-width: 360px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      height: 100%;
    }

    .video-title .title {
      font-weight: 700;
      font-size: 2.4rem;
      letter-spacing: -0.03em;
    }

    .video-title .dash {
      display: block;
      margin: 0.9rem 0;
      font-size: 1.3rem;
      opacity: 0.5;
      font-weight: 300;
    }

    .video-title .credit {
      display: block;
      font-size: 1.2rem;
      font-weight: 400;
      opacity: 0.9;
    }

    .video-title .credit strong {
      font-weight: 700;
    }

    .dark .video-title,
    .dark .video-title .dash,
    .dark .video-title .credit {
      color: #fff;
    }

    /* ============================================= */
    /* 6. VIDEO CONTAINER (VERTICAL 9:16)           */
    /* ============================================= */
    .video-container {
      position: relative;
      width: var(--video-width);
      height: var(--video-height);
      max-width: 90vw;
      aspect-ratio: 9 / 16;
      border-radius: 24px;
      overflow: hidden;
      box-shadow: 0 40px 100px rgba(0, 0, 0, 0.35);
      cursor: pointer;
      flex-shrink: 0;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
    }

    /* ============================================= */
    /* 7. PLAY/PAUSE BUTTON (CENTER OF VIDEO)       */
    /* ============================================= */
    .control-btn {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0);
      width: 52px;
      height: 52px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
      transition: transform 0.25s ease, opacity 0.25s ease;
      opacity: 0;
      pointer-events: none;
      z-index: 10;
    }

    .control-btn.show {
      opacity: 1;
      pointer-events: all;
      transform: translate(-50%, -50%) scale(1);
    }

    .control-btn svg {
      width: 24px;
      height: 24px;
      fill: #000;
    }

    .control-btn:hover {
      transform: translate(-50%, -50%) scale(1.15);
    }

    /* ============================================= */
    /* 8. CLOSE BUTTON (TOP-RIGHT)                  */
    /* ============================================= */
    .close-btn {
      position: absolute;
      top: 2rem;
      right: 2rem;
      background: none;
      border: none;
      font-size: 2.5rem;
      cursor: pointer;
      color: #000;
      z-index: 20;
      transition: transform 0.2s ease;
    }

    .dark .close-btn {
      color: #fff;
    }

    .close-btn:hover {
      transform: scale(1.2);
    }

    /* ============================================= */
    /* 9. MOBILE & TABLET LAYOUT (STACKED, SMALLER VIDEOS) */
    /* ============================================= */
    @media (max-width: 1100px) {
      .page-wrapper {
        flex-direction: column;
        gap: 1.5rem;
        padding: 6vh 5vw;
        height: auto;
        overflow-y: auto;
        align-items: center;
        justify-content: flex-start;
      }

      .video-title {
        order: 1;
        max-width: 90vw;
        height: auto;
        padding: 1.5rem 0;
        justify-content: center;
      }

      .video-container {
        order: 2;
        width: 100%;
        max-width: var(--mobile-video-max-width);
        height: auto;
        aspect-ratio: 9 / 16;
        margin-bottom: 1.5rem;
      }

      /* Ensure videos scale down nicely */
      video {
        max-width: 100%;
        height: auto;
      }

      /* Enable scrolling on body */
      body {
        overflow-y: auto;
      }
    }

    /* Extra polish for very small phones */
    @media (max-width: 480px) {
      .video-title .title {
        font-size: 2rem;
      }
      .video-container {
        max-width: 280px;
      }
    }
  </style>
</head>

<!-- ============================================= -->
<!-- 10. BODY CONTENT (HTML STRUCTURE)             -->
<!-- ============================================= -->
<body class="light">

  <!-- Main layout: title + two vertical videos -->
  <div class="page-wrapper">

    <!-- Title and credit -->
    <div class="video-title">
      <div class="title" id="title-el"></div>
      <div class="dash">-</div>
      <div class="credit" id="credit-el"></div>
    </div>

    <!-- First video (Part 1) -->
    <div class="video-container" id="video-container-1">
      <video id="video-el-1" preload="metadata" playsinline>
        <source src="https://wocyyrc2hiwuxrzt.public.blob.vercel-storage.com/dorians-spleen-part1.mov" type="video/mp4">
      </video>
      <div class="control-btn" id="control-btn-1">
        <svg id="play-icon-1" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        <svg id="pause-icon-1" viewBox="0 0 24 24" style="display: none;"><path d="M14,19H18V5H14M6,19H10V5H6V19Z"/></svg>
      </div>
    </div>

    <!-- Second video (Part 2) -->
    <div class="video-container" id="video-container-2">
      <video id="video-el-2" preload="metadata" playsinline>
        <source src="https://wocyyrc2hiwuxrzt.public.blob.vercel-storage.com/dorians-spleen-part2.mov" type="video/mp4">
      </video>
      <div class="control-btn" id="control-btn-2">
        <svg id="play-icon-2" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
        <svg id="pause-icon-2" viewBox="0 0 24 24" style="display: none;"><path d="M14,19H18V5H14M6,19H10V5H6V19Z"/></svg>
      </div>
    </div>
  </div>

  <!-- Close button (goes back) -->
  <button class="close-btn" onclick="history.back()">×</button>

  <!-- ============================================= -->
  <!-- 11. JAVASCRIPT (INTERACTIVE FEATURES)        -->
  <!-- ============================================= -->
  <script>
    /* -------------------------------------------------
       STEP 1: Set title and credit from CSS variables
       ------------------------------------------------- */
    const titleEl = document.getElementById('title-el');
    const creditEl = document.getElementById('credit-el');

    const titleText = getComputedStyle(document.documentElement).getPropertyValue('--title').trim();
    const byText = getComputedStyle(document.documentElement).getPropertyValue('--credit-by').trim();
    const nameText = getComputedStyle(document.documentElement).getPropertyValue('--credit-name').trim();

    titleEl.textContent = titleText;
    creditEl.innerHTML = `${byText} <strong>${nameText}</strong>`;

    document.title = "L'Entropiste - Tristan Partridge";

    /* -------------------------------------------------
       STEP 2: Apply saved theme (light/dark)
       ------------------------------------------------- */
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
    }

    /* -------------------------------------------------
       STEP 3: Get all video elements
       ------------------------------------------------- */
    const video1 = document.getElementById('video-el-1');
    const video2 = document.getElementById('video-el-2');
    const btn1 = document.getElementById('control-btn-1');
    const btn2 = document.getElementById('control-btn-2');
    const play1 = document.getElementById('play-icon-1');
    const pause1 = document.getElementById('pause-icon-1');
    const play2 = document.getElementById('play-icon-2');
    const pause2 = document.getElementById('pause-icon-2');
    const cont1 = document.getElementById('video-container-1');
    const cont2 = document.getElementById('video-container-2');

    let hideTimer1, hideTimer2;

    /* -------------------------------------------------
       STEP 4: Pause the other video when one plays
       ------------------------------------------------- */
    function pauseOther(currentVideo) {
      if (currentVideo === video1 && !video2.paused) {
        video2.pause();
        play2.style.display = 'block';
        pause2.style.display = 'none';
        btn2.classList.add('show');
        clearTimeout(hideTimer2);
        hideTimer2 = setTimeout(() => btn2.classList.remove('show'), 3000);
      } else if (currentVideo === video2 && !video1.paused) {
        video1.pause();
        play1.style.display = 'block';
        pause1.style.display = 'none';
        btn1.classList.add('show');
        clearTimeout(hideTimer1);
        hideTimer1 = setTimeout(() => btn1.classList.remove('show'), 3000);
      }
    }

    /* -------------------------------------------------
       STEP 5: Initialize a single video player
       ------------------------------------------------- */
    function initVideo(video, btn, playIcon, pauseIcon, container, otherVideo) {
      // Start paused
      video.pause();
      playIcon.style.display = 'block';
      pauseIcon.style.display = 'none';
      btn.classList.add('show');

      // Click to play/pause
      container.addEventListener('click', () => {
        clearTimeout(window[`timer_${video.id}`]);

        if (video.paused) {
          pauseOther(video);
          video.play();
          playIcon.style.display = 'none';
          pauseIcon.style.display = 'block';
          window[`timer_${video.id}`] = setTimeout(() => btn.classList.remove('show'), 1800);
        } else {
          video.pause();
          pauseIcon.style.display = 'none';
          playIcon.style.display = 'block';
          window[`timer_${video.id}`] = setTimeout(() => btn.classList.remove('show'), 3000);
        }
      });

      // Show button on hover (desktop only)
      container.addEventListener('mouseenter', () => {
        clearTimeout(window[`timer_${video.id}`]);
        btn.classList.add('show');
        window[`timer_${video.id}`] = setTimeout(() => btn.classList.remove('show'), 1200);
      });

      // Hide quickly when leaving (only if playing)
      container.addEventListener('mouseleave', () => {
        if (!video.paused) {
          window[`timer_${video.id}`] = setTimeout(() => btn.classList.remove('show'), 300);
        }
      });
    }

    // Initialize both videos
    initVideo(video1, btn1, play1, pause1, cont1, video2);
    initVideo(video2, btn2, play2, pause2, cont2, video1);
  </script>
</body>
</html>